<article *ngIf="user">
  <section id="profile-header" *ngIf="!isUpdate">
    <a (click)="showDialog = !showDialog" class="edit-btn"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a>
    <div class="profile-picture"> <img *ngIf="!user?.profile_img" src="../../assets/img/user-picture.png"> <img *ngIf="user?.profile_img" src="../../assets/img/{{ user?.profile_img }}">
      <div class="social-icon"  *ngIf="details"> 
          <a *ngIf="details?.yelp" href="{{details?.yelp}}" target="_blank" title="Yelp"><i class="fa fa-yelp" aria-hidden="true"></i></a>
          <a *ngIf="details?.twitter" href="{{details?.twitter}}" target="_blank" title="Twitter"><i class="fa fa-twitter-square" aria-hidden="true"></i></a>
          <a *ngIf="details?.facebook" href="{{details?.facebook}}" target="_blank" title="Facebook"><i class="fa fa-facebook-square" aria-hidden="true"></i></a>
          <a *ngIf="details?.linkedin" href="{{details?.linkedin}}" target="_blank" title="LinkedIn"><i class="fa fa-linkedin-square" aria-hidden="true"></i></a>
          <a *ngIf="details?.pinterest" href="{{details?.pinterest}}" target="_blank" title="Pinterest"><i class="fa fa-pinterest-square" aria-hidden="true"></i></a>
        </div>
        </div>
    <div>
      <h2>{{user.name}}</h2>
      <i class="fa fa-envelope-o" aria-hidden="true"></i> <a href="mailto:{{user?.email}}">{{user?.email}}</a> <br />
      <span *ngIf="details?.url"> <i class="fa fa-globe" aria-hidden="true"></i> <a href="{{details?.url}}" target="_blank">{{details?.url}}</a></span> <span *ngIf="details?.city"><i aria-hidden="true" class="fa fa-map-marker"></i> {{details?.city}}</span><span *ngIf="details?.state">, {{details?.state}}</span></div>
  </section>
  <app-modal [(visible)]="showDialog">
    <h2>Profile Edit Form</h2>
    <div class="edit-form" *ngIf="students">
      <form id="studentProfile" [formGroup]="studentProfileForm" (ngSubmit)="updateProfile()">
        <div class="form-row">
          <label>Name:</label>
          <input type="text" formControlName="name" [(ngModel)]="user.name" />
          <control-messages [control]="studentProfileForm.controls.name"></control-messages>
        </div>
        <div class="form-row">
          <label>Update Profile Picture:</label>
          <input type="file" formControlName="profileImage" accept="image/x-png,image/gif,image/jpeg" />
        </div>
        <h2>Update Social Link</h2>
        <div *ngIf="details">
          <div class="form-row">
            <label>URL:</label>
            <input type="text" formControlName="url" [(ngModel)]="details.url"/>
          </div>
          <div class="form-row">
            <label>Yelp Link:</label>
            <input type="text" formControlName="yelp" [(ngModel)]="details.yelp"/>
          </div>
          <div class="form-row">
            <label>Twitter Link:</label>
            <input type="text" formControlName="twitter" [(ngModel)]="details.twitter"/>
          </div>
          <div class="form-row">
            <label>Facebook Link:</label>
            <input type="text" formControlName="facebook" [(ngModel)]="details.facebook"/>
          </div>
          <div class="form-row">
            <label>LinkedIn Link:</label>
            <input type="text" formControlName="linkedIn" [(ngModel)]="details.linkedin" />
            <br>
          </div>
          <div class="form-row">
            <label>Pinterest Link:</label>
            <input type="text" formControlName="pinterest" [(ngModel)]="details.pinterest"/>
          </div>
        </div>
        <div *ngIf="!details">
          <div class="form-row">
            <label>URL:</label>
            <input type="text" formControlName="url" placeholder="Enter Your URL" />
          </div>
          <div class="form-row">
            <label>Yelp Link:</label>
            <input type="text" formControlName="yelp" placeholder="Yelp Link"/>
          </div>
          <div class="form-row">
            <label>Twitter Link:</label>
            <input type="text" formControlName="twitter" placeholder="Twitter Link"/>
          </div>
          <div class="form-row">
            <label>Facebook Link:</label>
            <input type="text" formControlName="facebook" placeholder="Facebook Link"/>
          </div>
          <div class="form-row">
            <label>LinkedIn Link:</label>
            <input type="text" formControlName="linkedIn" placeholder="Linkedin Link" />
            <br>
          </div>
          <div class="form-row">
            <label>Pinterest Link:</label>
            <input type="text" formControlName="pinterest" placeholder="Pinterest Link" />
          </div>
        </div>
        <div class="form-row">
          <button type="submit" class="btn btn-primary"> <i class="fa fa-check" aria-hidden="true"></i> </button>
          <button class="btn btn-default" (click)="showDialog = !showDialog"> <i class="fa fa-times-circle" aria-hidden="true"></i> </button>
        </div>
      </form>
    </div>
  </app-modal>
  <!-- #profile header -->
  <!-- tab Start for mobile-->
  <tabs *ngIf="width < 768" ><tab tabTitle="Courses">
    <h3><a [routerLink]="['/courses/list/all']">Click here to start your journey</a></h3>
    <!-- Below section commented for show the course -->
    <!--<article class="card-box" *ngFor="let course of user?.student.courses">
      <div class="img-ctn">
        <figure> <a [routerLink]="['/course', course?.id]"> <img *ngIf="course?.semesters[0]?.primary_img" src="../../assets/img/courses/{{ course?.semesters[0]?.primary_img }}"> <img *ngIf="!course?.semesters[0]?.primary_img" src="../../assets/img/course-picture.jpg"> </a> </figure>
        <h3>{{course?.title}}</h3>
      </div>
      <div class="card-info">
        <div class="group_info"> <span class="group_rating">
          <star-rating-comp [starType]="'svg'" [rating]="course?.rating" [showHalfStars]="true" [readOnly]="true"></star-rating-comp>
          </span> </div>
        <p class="with-box"><span>With</span> {{course?.instructor}}</p>
        <a [routerLink]="['/course', course?.id]"  class="page-cta" aria-roledescription="button">View Course</a> </div>
    </article>-->
    </tab> <tab tabTitle="ABOUT">
    <div class="contact_box"> <a href="javascript:void(0)" (click)="isEditAbout = !isEditAbout" class="edit-btn"> <i class="fa fa-pencil-square-o" aria-hidden="true"></i> </a>
      <p>{{user.student.details?.description}}</p>
      <app-modal [(visible)]="isEditAbout">
        <h2>Edit Your Description</h2>
        <div class="edit-form">
          <form id="studentDescription" [formGroup]="studentDescriptionForm" (ngSubmit)="updatestudentDescription()">
            <div class="form-row">
              <label>Description:</label>
              <textarea *ngIf="details?.length"  cols="30" rows="10"  formControlName="description" [(ngModel)]="details.description"></textarea>
              <textarea *ngIf="!details?.length" cols="30" rows="10"  formControlName="description"></textarea>
              <control-messages [control]="studentDescriptionForm.controls.description"></control-messages>
            </div>
            <button type="submit" class="btn btn-primary" [disabled]="!studentDescriptionForm.valid"> <i class="fa fa-check" aria-hidden="true"></i> </button>
            <button class="btn btn-default" (click)="isEditAbout = !isEditAbout"> <i class="fa fa-times-circle" aria-hidden="true"></i> </button>
          </form>
        </div>
      </app-modal>
    </div>
    </tab> <tab tabTitle="CONTACT">
    <div class="contact_box">
      <address *ngFor="let address of user?.student.addresses">
      <div> <strong *ngIf="user?.addresses > 1">{{ address?.type }}</strong><br />
        {{ address?.streetAddress }}<br />
        {{ address?.city }}, {{ address?.state }}, {{ address?.zip }}<br />
        {{ address?.country }}<br />
        <br />
        Phone: <a href="tel:{{ user?.phone }}">{{ user?.phone }}</a><br />
        Email: <a href="mailto:{{ user?.email }}">{{ user?.email }}</a> </div>
      </address>
      <a (click)="isEdit = !isEdit" class="edit-btn"> <i class="fa fa-pencil-square-o" aria-hidden="true"></i> </a>
      <app-modal [(visible)]="isEdit">
          <h2>Edit Your Address</h2>
          <div class="edit-form">
            <form id="studentAddress" [formGroup]="studentAddressForm" (ngSubmit)="updateAddress()">
              <div *ngIf="!studentAddress.length">
              <div class="form-row">
                <label>Street Address:</label>
                <input type="text" formControlName="addressStreet" placeholder="Street Address" />
                <control-messages [control]="studentAddressForm.controls.addressStreet" ></control-messages>
              </div>
              <div class="form-row">
                <label>City:</label>
                <input type="text" formControlName="addressCity" placeholder="City" />
                <control-messages [control]="studentAddressForm.controls.addressCity"></control-messages>
              </div>
              <div class="form-row">
                <label>State:</label>
                <input type="text" formControlName="addressState" placeholder="State"/>
                <control-messages [control]="studentAddressForm.controls.addressState"></control-messages>
              </div>
              <div class="form-row">
                <label>Zip:</label>
                <input type="text" formControlName="addressZip" pattern="[0-9]+" placeholder="Zip"/>
                <control-messages [control]="studentAddressForm.controls.addressZip"></control-messages>
              </div>
              <div class="form-row">
                <label>Country:</label>
                <input type="text" formControlName="addressCountry" placeholder="Country"/>
                <control-messages [control]="studentAddressForm.controls.addressCountry"></control-messages>
              </div>
              <div class="form-row">
                <label>Phone:</label>
                <input type="text" formControlName="addressPhone" maxlength="10" pattern="[0-9]+" placeholder="Phone"/>
                <control-messages [control]="studentAddressForm.controls.addressPhone"></control-messages>
              </div>
              <div class="form-row">
                <label>Email:</label>
                <input type="text" formControlName="addressEmail" placeholder="Email"/>
                <control-messages [control]="studentAddressForm.controls.addressEmail"></control-messages>
              </div>
              </div>
              <div *ngIf="studentAddress.length">
                  <div *ngFor="let address of user?.student.addresses">
                  <div class="form-row">
                    <label>Street Address:</label>
                    <input type="text" formControlName="addressStreet" [(ngModel)]="address.streetAddress"/>
                    <control-messages [control]="studentAddressForm.controls.addressStreet"></control-messages>
                  </div>
                  <div class="form-row">
                    <label>City:</label>
                    <input type="text" formControlName="addressCity" [(ngModel)]="address.city"/>
                    <control-messages [control]="studentAddressForm.controls.addressCity"></control-messages>
                  </div>
                  <div class="form-row">
                    <label>State:</label>
                    <input type="text" formControlName="addressState" [(ngModel)]="address.state"/>
                    <control-messages [control]="studentAddressForm.controls.addressState"></control-messages>
                  </div>
                  <div class="form-row">
                    <label>Zip:</label>
                    <input type="text" formControlName="addressZip" pattern="[0-9]+" [(ngModel)]="address.zip"/>
                    <control-messages [control]="studentAddressForm.controls.addressZip"></control-messages>
                  </div>
                  <div class="form-row">
                    <label>Country:</label>
                    <input type="text" formControlName="addressCountry" [(ngModel)]="address.country"/>
                    <control-messages [control]="studentAddressForm.controls.addressCountry"></control-messages>
                  </div>
                  <div class="form-row">
                    <label>Phone:</label>
                    <input *ngIf="students.phone"  type="text" formControlName="addressPhone" maxlength="10" pattern="[0-9]+" [(ngModel)]="students.phone" />
                    <input *ngIf="!students.phone"  type="text" formControlName="addressPhone" maxlength="10" pattern="[0-9]+"/>
                    <control-messages [control]="studentAddressForm.controls.addressPhone"></control-messages>
                  </div>
                  <div class="form-row">
                    <label>Email:</label>
                    <input type="text" formControlName="addressEmail" [(ngModel)]="user.email"/>
                    <control-messages [control]="studentAddressForm.controls.addressEmail"></control-messages>
                  </div>
                  </div></div>
              <div class="form-row">
                <button type="submit" class="btn btn-primary" [disabled]="!studentAddressForm.valid"> <i class="fa fa-check" aria-hidden="true"></i> </button>
                <button class="btn btn-default" (click)="isEdit = !isEdit"> <i class="fa fa-times-circle" aria-hidden="true"></i> </button>
              </div>
            
            </form>
          </div>
        </app-modal>
    </div>
    </tab> </tabs>
  <!-- #Tab --> 
  
  <!-- desktop view -->
  <section *ngIf="width > 767" id="desktopcourses">
    <h2>Courses</h2>
    <h3><a [routerLink]="['/courses/list/all']">Click here to start your journey</a></h3>
    <!-- Below section commented for show the course -->
    <!--<article class="card-box" *ngFor="let course of user?.courses">
      <div class="img-ctn"> 
        <div class="price">${{course.id}}</div>
        <figure> <a [routerLink]="['/course', course?.id]"> <img *ngIf="course?.semesters[0]?.primary_img" src="../../assets/img/courses/{{ course?.semesters[0]?.primary_img }}"> <img *ngIf="!course?.semesters[0]?.primary_img" src="../../assets/img/course-picture.jpg"> </a> </figure>
        <h3>{{course?.title}}</h3>
      </div>
      <div class="card-info"> 
        <div class="group_info"><span class="group_rating"><star-rating-comp [starType]="'svg'" [rating]="{{course.rating}}" [showHalfStars]="true" [readOnly]="true"></star-rating-comp></span></div>
        <p class="date">
          <i class="fa fa-calendar" aria-hidden="true"></i> 
            <span class="date_stamp">{{ card.semesters[0].start_date | date: 'MM/dd/yyyy' }}</span>
        </p>
        <p class="with-box"><span>With</span> {{course?.instructor}}</p>
        <a [routerLink]="['/course', course?.id]"  class="page-cta">View Course</a> </div>
    </article>-->
    <h2> ABOUT <a (click)="isEditAbout = !isEditAbout" class="edit-btn"> <i class="fa fa-pencil-square-o" aria-hidden="true"></i> </a> </h2>
    <p>{{user.student.details?.description}}</p>
    <app-modal [(visible)]="isEditAbout">
      <h2>Edit Your Description</h2>
      <div class="edit-form">
        <form id="studentDescription" [formGroup]="studentDescriptionForm" (ngSubmit)="updatestudentDescription()">
          <div class="form-row">
            <textarea *ngIf="details?.length"  cols="30" rows="10"  formControlName="description" [(ngModel)]="details.description"></textarea>
            <textarea *ngIf="!details?.length" cols="30" rows="10"  formControlName="description"></textarea>
            <control-messages [control]="studentDescriptionForm.controls.description"></control-messages>
          </div>
          <button type="submit" class="btn btn-primary" [disabled]="!studentDescriptionForm.valid"> <i class="fa fa-check" aria-hidden="true"></i> </button>
          <button class="btn btn-default" (click)="isEditAbout = !isEditAbout"> <i class="fa fa-times-circle" aria-hidden="true"></i> </button>
        </form>
      </div>
    </app-modal>
    <h2> CONTACT <a (click)="isEdit = !isEdit" class="edit-btn"> <i class="fa fa-pencil-square-o" aria-hidden="true"></i> </a> </h2>
    <div class="contact_box">
        <address *ngFor="let address of user?.student.addresses">
            <div> <strong *ngIf="address.length > 1">{{ address?.type }}</strong><br />
              {{ address?.streetAddress }}<br />
              {{ address?.city }}, {{ address?.state }}, {{ address?.zip }}<br />
              {{ address?.country }}<br />
              <br />
              Phone: <a href="tel:{{ user?.phone }}">{{ user?.phone }}</a><br />
              Email: <a href="mailto:{{ user?.email }}">{{ user?.email }}</a> </div>
            </address>
            <app-modal [(visible)]="isEdit">
                <h2>Edit Your Address</h2>
                <div class="edit-form">
                  <form id="studentAddress" [formGroup]="studentAddressForm" (ngSubmit)="updateAddress()">
                    <div *ngIf="!studentAddress.length">
                    <div class="form-row">
                      <label>Street Address:</label>
                      <input type="text" formControlName="addressStreet" placeholder="Street Address" />
                      <control-messages [control]="studentAddressForm.controls.addressStreet" ></control-messages>
                    </div>
                    <div class="form-row">
                      <label>City:</label>
                      <input type="text" formControlName="addressCity" placeholder="City" />
                      <control-messages [control]="studentAddressForm.controls.addressCity"></control-messages>
                    </div>
                    <div class="form-row">
                      <label>State:</label>
                      <input type="text" formControlName="addressState" placeholder="State"/>
                      <control-messages [control]="studentAddressForm.controls.addressState"></control-messages>
                    </div>
                    <div class="form-row">
                      <label>Zip:</label>
                      <input type="text" formControlName="addressZip" pattern="[0-9]+" placeholder="Zip"/>
                      <control-messages [control]="studentAddressForm.controls.addressZip"></control-messages>
                    </div>
                    <div class="form-row">
                      <label>Country:</label>
                      <input type="text" formControlName="addressCountry" placeholder="Country"/>
                      <control-messages [control]="studentAddressForm.controls.addressCountry"></control-messages>
                    </div>
                    <div class="form-row">
                      <label>Phone:</label>
                      <input type="text" formControlName="addressPhone" maxlength="10" pattern="[0-9]+" placeholder="Phone"/>
                      <control-messages [control]="studentAddressForm.controls.addressPhone"></control-messages>
                    </div>
                    <div class="form-row">
                      <label>Email:</label>
                      <input type="text" formControlName="addressEmail" placeholder="Email"/>
                      <control-messages [control]="studentAddressForm.controls.addressEmail"></control-messages>
                    </div>
                    </div>
                    <div *ngIf="studentAddress.length">
                        <div *ngFor="let address of user?.student.addresses">
                        <div class="form-row">
                          <label>Street Address:</label>
                          <input type="text" formControlName="addressStreet" [(ngModel)]="address.streetAddress"/>
                          <control-messages [control]="studentAddressForm.controls.addressStreet"></control-messages>
                        </div>
                        <div class="form-row">
                          <label>City:</label>
                          <input type="text" formControlName="addressCity" [(ngModel)]="address.city"/>
                          <control-messages [control]="studentAddressForm.controls.addressCity"></control-messages>
                        </div>
                        <div class="form-row">
                          <label>State:</label>
                          <input type="text" formControlName="addressState" [(ngModel)]="address.state"/>
                          <control-messages [control]="studentAddressForm.controls.addressState"></control-messages>
                        </div>
                        <div class="form-row">
                          <label>Zip:</label>
                          <input type="text" formControlName="addressZip" pattern="[0-9]+" [(ngModel)]="address.zip"/>
                          <control-messages [control]="studentAddressForm.controls.addressZip"></control-messages>
                        </div>
                        <div class="form-row">
                          <label>Country:</label>
                          <input type="text" formControlName="addressCountry" [(ngModel)]="address.country"/>
                          <control-messages [control]="studentAddressForm.controls.addressCountry"></control-messages>
                        </div>
                        <div class="form-row">
                          <label>Phone:</label>
                          <input *ngIf="students.phone"  type="text" formControlName="addressPhone" maxlength="10" pattern="[0-9]+" [(ngModel)]="students.phone" />
                          <input *ngIf="!students.phone"  type="text" formControlName="addressPhone" maxlength="10" pattern="[0-9]+"/>
                          <control-messages [control]="studentAddressForm.controls.addressPhone"></control-messages>
                        </div>
                        <div class="form-row">
                          <label>Email:</label>
                          <input type="text" formControlName="addressEmail" [(ngModel)]="user.email"/>
                          <control-messages [control]="studentAddressForm.controls.addressEmail"></control-messages>
                        </div>
                        </div></div>
                    <div class="form-row">
                      <button type="submit" class="btn btn-primary" [disabled]="!studentAddressForm.valid"> <i class="fa fa-check" aria-hidden="true"></i> </button>
                      <button class="btn btn-default" (click)="isEdit = !isEdit"> <i class="fa fa-times-circle" aria-hidden="true"></i> </button>
                    </div>
                  
                  </form>
                </div>
              </app-modal>
    </div>
  </section>
</article>
